This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: backend/server.js, backend/models/User.js, backend/models/ChunkSession.js, backend/middleware/auth.js, backend/routes/auth.js, backend/routes/sessions.js, frontend/src/main.jsx, frontend/src/App.jsx, frontend/src/context/AuthContext.jsx, frontend/src/utils/api.js, frontend/src/pages/Login.jsx, frontend/src/pages/Register.jsx, frontend/src/components/Sidebar.jsx, frontend/vite.config.js
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
backend/middleware/auth.js
backend/models/ChunkSession.js
backend/models/User.js
backend/routes/auth.js
backend/routes/sessions.js
backend/server.js
frontend/src/App.jsx
frontend/src/components/Sidebar.jsx
frontend/src/context/AuthContext.jsx
frontend/src/main.jsx
frontend/src/pages/Login.jsx
frontend/src/pages/Register.jsx
frontend/src/utils/api.js
frontend/vite.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="backend/middleware/auth.js">
const jwt = require('jsonwebtoken');
const User = require('../models/User');

const protect = async (req, res, next) => {
    let token;
    if (req.headers.authorization && req.headers.authorization.startsWith('Bearer')) {
        try {
            token = req.headers.authorization.split(' ')[1];
            const decoded = jwt.verify(token, process.env.JWT_SECRET);
            req.user = await User.findById(decoded.id).select('-password');
            next();
        } catch (error) {
            res.status(401).json({ message: 'Not authorized, token failed' });
        }
    }
    if (!token) {
        res.status(401).json({ message: 'Not authorized, no token' });
    }
};

module.exports = { protect };
</file>

<file path="backend/models/ChunkSession.js">
const mongoose = require('mongoose');

const sessionSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
    name: { type: String, default: 'Untitled Workspace' },
    rawCode: { type: String, required: true },
    settings: {
        mode: String,
        lineCount: Number,
        partCount: Number,
        useContext: Boolean
    },
    stats: {
        lines: Number,
        chars: Number,
        tokens: Number
    }
}, { timestamps: true });

module.exports = mongoose.model('ChunkSession', sessionSchema);
</file>

<file path="backend/models/User.js">
const mongoose = require('mongoose');

const userSchema = new mongoose.Schema({
    username: { type: String, required: true },
    email: { type: String, required: true, unique: true },
    password: { type: String, required: true },
    presets: [{
        name: String,
        prefix: String,
        suffix: String
    }]
}, { timestamps: true });

module.exports = mongoose.model('User', userSchema);
</file>

<file path="backend/routes/auth.js">
const express = require('express');
const router = express.Router();
const User = require('../models/User');
const jwt = require('jsonwebtoken');
const bcrypt = require('bcryptjs');

const generateToken = (id) => {
    return jwt.sign({ id }, process.env.JWT_SECRET, { expiresIn: '30d' });
};

// @route   POST /api/auth/register
router.post('/register', async (req, res) => {
    const { username, email, password } = req.body;
    try {
        const userExists = await User.findOne({ email });
        if (userExists) return res.status(400).json({ message: 'User already exists' });

        const salt = await bcrypt.genSalt(10);
        const hashedPassword = await bcrypt.hash(password, salt);

        const user = await User.create({ username, email, password: hashedPassword });
        res.status(201).json({
            _id: user._id,
            username: user.username,
            email: user.email,
            token: generateToken(user._id)
        });
    } catch (err) {
        res.status(500).json({ message: err.message });
    }
});

// @route   POST /api/auth/login
router.post('/login', async (req, res) => {
    const { email, password } = req.body;
    try {
        const user = await User.findOne({ email });
        if (user && (await bcrypt.compare(password, user.password))) {
            res.json({
                _id: user._id,
                username: user.username,
                email: user.email,
                token: generateToken(user._id)
            });
        } else {
            res.status(401).json({ message: 'Invalid email or password' });
        }
    } catch (err) {
        res.status(500).json({ message: err.message });
    }
});

module.exports = router;
</file>

<file path="backend/routes/sessions.js">
const express = require('express');
const router = express.Router();
const ChunkSession = require('../models/ChunkSession');
const { protect } = require('../middleware/auth');

// @route   POST /api/sessions
// @desc    Save a new chunk session
router.post('/', protect, async (req, res) => {
    const { name, rawCode, settings, stats } = req.body;
    try {
        const session = await ChunkSession.create({
            userId: req.user._id,
            name,
            rawCode,
            settings,
            stats
        });
        res.status(201).json(session);
    } catch (err) {
        res.status(500).json({ message: err.message });
    }
});

// @route   GET /api/sessions
// @desc    Get all sessions for the logged-in user
router.get('/', protect, async (req, res) => {
    try {
        const sessions = await ChunkSession.find({ userId: req.user._id }).sort({ createdAt: -1 });
        res.json(sessions);
    } catch (err) {
        res.status(500).json({ message: err.message });
    }
});

// @route   DELETE /api/sessions/:id
router.delete('/:id', protect, async (req, res) => {
    try {
        const session = await ChunkSession.findOneAndDelete({ _id: req.params.id, userId: req.user._id });
        if (!session) return res.status(404).json({ message: "Session not found" });
        res.json({ message: "Workspace deleted" });
    } catch (err) {
        res.status(500).json({ message: err.message });
    }
});

module.exports = router;
</file>

<file path="backend/server.js">
require('dotenv').config();
const express = require('express');
const mongoose = require('mongoose');
const cors = require('cors');

const app = express();
app.use(express.json());
app.use(cors());

// --- 1. Database Connection ---
mongoose.connect(process.env.MONGO_URI)
    .then(() => console.log("ðŸš€ MongoDB Connected: Code Chunker DB ready"))
    .catch(err => console.error("âŒ MongoDB Error:", err));

// --- 2. Test Route ---
app.get('/', (req, res) => {
    res.send("Code Chunker Pro API is Online...");
});

// --- 3. Routes ---
app.use('/api/auth', require('./routes/auth'));
app.use('/api/sessions', require('./routes/sessions')); // ADDED

const PORT = process.env.PORT || 5000;
app.listen(PORT, () => {
    console.log(`Server running on port ${PORT}`);
});

module.exports = app;
</file>

<file path="frontend/src/App.jsx">
import React, { useState } from 'react';
import { HashRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import Sidebar from './components/Sidebar';
import InputArea from './components/InputArea';
import ChunkOutput from './components/ChunkOutput';
import Toast from './components/Toast';
import Login from './pages/Login';
import Register from './pages/Register'; // ADDED THIS IMPORT
import { getStats, splitText } from './utils/chunker';
import { useAuth } from './context/AuthContext';
import API from './utils/api'; // ADDED
import { FaBars, FaCut, FaHistory } from 'react-icons/fa'; // ADDED FaHistory

function App() {
  const { token, user, loading } = useAuth();
  const [code, setCode] = useState('');
  const [chunks, setChunks] = useState([]);
  const [toastMsg, setToastMsg] = useState(null);
  const [isSidebarOpen, setIsSidebarOpen] = useState(false);
  
  const [settings, setSettings] = useState({
    mode: 'lines', 
    lineCount: 1500,
    partCount: 5,
    useContext: false,
    customPrefix: '// Part {i} of {total}',
    customSuffix: ''
  });

  const stats = getStats(code);
  const showToast = (msg) => setToastMsg(msg);

  const handleSplit = () => {
    if (!code.trim()) {
      showToast("Please input some code first!");
      return;
    }
    const result = splitText(code, settings);
    setChunks(result);
    showToast(`Successfully split into ${result.length} chunks`);
    setIsSidebarOpen(false); 
  };

  // --- NEW: SAVE WORKSPACE ---
  const handleSaveWorkspace = async () => {
    if (!code.trim()) return showToast("Nothing to save!");
    const name = prompt("Enter a name for this workspace:", "Project " + new Date().toLocaleDateString());
    if (!name) return;

    try {
      await API.post('/sessions', {
        name,
        rawCode: code,
        settings,
        stats
      });
      showToast("Workspace saved to cloud!");
    } catch (err) {
      showToast("Failed to save workspace");
    }
  };

  // --- NEW: LOAD WORKSPACE ---
  const handleLoadSession = (session) => {
    setCode(session.rawCode);
    setSettings(session.settings);
    setChunks([]); // Clear output to encourage fresh split
    showToast(`Loaded: ${session.name}`);
  };

  // Prevent redirecting while checking if user is already logged in
  if (loading) {
    return <div style={{ height: '100vh', background: 'var(--sidebar-bg)', display: 'flex', alignItems: 'center', justifyContent: 'center', color: 'white' }}>Loading Workspace...</div>;
  }

  return (
    <Router>
      <Routes>
        {/* Auth Routes */}
        <Route path="/login" element={<Login />} />
        <Route path="/register" element={<Register />} />
        
        {/* Main Dashboard Route */}
        <Route path="/" element={
          token ? (
            <div className="app-layout">
              {/* 1. Mobile Header */}
              <div className="mobile-header">
                 <div style={{ display: 'flex', alignItems: 'center', gap: '10px', fontWeight: '700' }}>
                    <FaCut color="var(--accent)" /> CodeChunker
                 </div>
                 <button onClick={() => setIsSidebarOpen(true)} style={{ background: 'transparent', border: '1px solid #333', color: 'white', padding: '8px' }}>
                   <FaBars />
                 </button>
              </div>

              {/* 2. Sidebar */}
<Sidebar 
  settings={settings} 
  setSettings={setSettings} 
  onSplit={handleSplit} 
  isOpen={isSidebarOpen}
  onClose={() => setIsSidebarOpen(false)}
  onLoadSession={handleLoadSession} // ADDED
/>

              {/* 3. Mobile Overlay */}
              <div className={`overlay ${isSidebarOpen ? 'active' : ''}`} onClick={() => setIsSidebarOpen(false)}></div>

                            {/* 4. Main Content */}
              <div className="main-scroll-area">
                <div style={{ marginBottom: '24px', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-end' }}>
                  <div>
                    <h2 style={{ fontSize: '1.5rem', fontWeight: '700' }}>Dashboard</h2>
                    <p style={{ color: 'var(--text-muted)' }}>Welcome back, {user?.username || 'User'}</p>
                  </div>
                  <button 
                    className="btn-secondary" 
                    onClick={handleSaveWorkspace}
                    style={{ borderColor: 'var(--pm-orange)', color: 'var(--pm-orange)', fontWeight: '600' }}
                  >
                    <FaHistory /> Save Workspace
                  </button>
                </div>
                
                <div style={{ display: 'flex', flexDirection: 'column', gap: '24px' }}>
                  <InputArea 
                    code={code} 
                    setCode={setCode} 
                    stats={stats} 
                    onFileLoad={(c, n) => { setCode(c); showToast(`Loaded ${n}`); }}
                  />
                  <ChunkOutput chunks={chunks} onToast={showToast} />
                </div>

                <footer style={{ marginTop: 'auto', paddingTop: '40px', paddingBottom: '20px', textAlign: 'center', fontSize: '0.8rem', color: '#999' }}>
                  CodeChunker Pro v2.0 â€¢ Cloud Sync Enabled
                </footer>
              </div>
            </div>
          ) : (
            <Navigate to="/login" />
          )
        } />
        
        {/* Fallback */}
        <Route path="*" element={<Navigate to="/" />} />
      </Routes>
      {toastMsg && <Toast message={toastMsg} onClose={() => setToastMsg(null)} />}
    </Router>
  );
}

export default App;
</file>

<file path="frontend/src/components/Sidebar.jsx">
import { useEffect, useState } from 'react'; // ADDED
import API from '../utils/api'; // ADDED
import { FaCut, FaMagic, FaSlidersH, FaTimes, FaHistory, FaTrashAlt, FaFolderOpen, FaSignOutAlt } from 'react-icons/fa';
import { useAuth } from '../context/AuthContext'; // ADDED

const Sidebar = ({ settings, setSettings, onSplit, isOpen, onClose, onLoadSession }) => {
  const { logout, user } = useAuth();
  const [sessions, setSessions] = useState([]);

  // 1. Fetch saved workspaces
  useEffect(() => {
    const fetchSessions = async () => {
      try {
        const { data } = await API.get('/sessions');
        setSessions(data);
      } catch (err) { console.error("Failed to load history"); }
    };
    if (user) fetchSessions();
  }, [user]);

  const deleteSession = async (id, e) => {
    e.stopPropagation();
    if (!window.confirm("Delete this workspace?")) return;
    try {
      await API.delete(`/sessions/${id}`);
      setSessions(sessions.filter(s => s._id !== id));
    } catch (err) { alert("Delete failed"); }
  };

  // --- RESTORED: AI CONTEXT AUTO-FILL ---
  const applyPreset = () => {
    setSettings({
      ...settings,
      useContext: true,
      customPrefix: '// PART {i} OF {total}\n// I am sending you part {i} of a large file. Do not answer yet.',
      customSuffix: '// END OF PART {i}\n// Await the next part.'
    });
    if (window.innerWidth < 768 && onClose) onClose();
  };

  const handleSplitClick = () => {
    onSplit();
    if (window.innerWidth < 768 && onClose) onClose();
  };

  return (
    <aside 
      className={`sidebar-container ${isOpen ? 'open' : ''}`}
      style={{ 
        width: '320px', 
        background: 'var(--sidebar-bg)', 
        color: 'var(--sidebar-text)',
        display: 'flex',
        flexDirection: 'column',
        borderRight: '1px solid var(--sidebar-border)',
        flexShrink: 0
      }}
    >
      
      {/* Brand Header */}
      <div style={{ padding: '32px 24px', borderBottom: '1px solid var(--sidebar-border)', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
        <div>
          <div style={{ display: 'flex', alignItems: 'center', gap: '12px', color: 'white', fontWeight: '700', fontSize: '1.25rem', letterSpacing: '-0.02em' }}>
            <div style={{ background: 'var(--accent)', padding: '6px', borderRadius: '6px', display: 'flex' }}>
              <FaCut size={18} color="white" />
            </div>
            CodeChunker
          </div>
          <div style={{ fontSize: '0.8rem', color: '#9CA3AF', marginTop: '4px', marginLeft: '46px' }}>
            Pro AI Context Tool
          </div>
        </div>

        {/* Mobile Close Button */}
        <button 
          onClick={onClose}
          style={{ 
            display: 'none', // Hidden on desktop via CSS, but we use inline for now
            background: 'transparent',
            color: 'white',
            border: '1px solid #333'
          }}
          className="mobile-close-btn" // We will target this in media query if needed, or just let layout handle it
        >
           <FaTimes />
        </button>
      </div>

      {/* Settings Form */}
      <div style={{ padding: '24px', overflowY: 'auto', flex: 1 }}>
        
        <div className="form-group">
          <label className="form-label"><FaSlidersH style={{ marginRight: 6 }}/> Split Strategy</label>
          <div style={{ display: 'flex', background: '#1F2937', borderRadius: '8px', padding: '4px', border: '1px solid #374151' }}>
            <button 
              style={{ 
                flex: 1, 
                background: settings.mode === 'lines' ? 'var(--accent)' : 'transparent',
                color: settings.mode === 'lines' ? 'white' : '#9CA3AF',
                fontSize: '0.8rem',
                borderRadius: '6px',
                padding: '8px'
              }}
              onClick={() => setSettings({...settings, mode: 'lines'})}
            >
              Fixed Lines
            </button>
            <button 
              style={{ 
                flex: 1, 
                background: settings.mode === 'parts' ? 'var(--accent)' : 'transparent',
                color: settings.mode === 'parts' ? 'white' : '#9CA3AF',
                fontSize: '0.8rem',
                borderRadius: '6px',
                padding: '8px'
              }}
              onClick={() => setSettings({...settings, mode: 'parts'})}
            >
              Equal Parts
            </button>
          </div>
        </div>

        <div className="form-group">
          <label className="form-label">
            {settings.mode === 'lines' ? 'Lines per Chunk' : 'Number of Parts'}
          </label>
          <div style={{ position: 'relative' }}>
            <input 
              type="number" 
              value={settings.mode === 'lines' ? settings.lineCount : settings.partCount}
              onChange={(e) => setSettings({
                ...settings, 
                [settings.mode === 'lines' ? 'lineCount' : 'partCount']: e.target.value
              })}
              style={{ paddingRight: '40px', fontSize: '1rem', fontWeight: '500' }}
            />
            <span style={{ position: 'absolute', right: '12px', top: '50%', transform: 'translateY(-50%)', color: '#6B7280', fontSize: '0.8rem' }}>
              {settings.mode === 'lines' ? 'LNs' : 'PTs'}
            </span>
          </div>
        </div>

                <div style={{ height: '1px', background: '#1F2937', margin: '32px 0' }}></div>

        {/* WORKSPACES HISTORY */}
        <div className="form-group">
          <label className="form-label"><FaHistory style={{ marginRight: 6 }}/> Recent Workspaces</label>
          <div style={{ display: 'flex', flexDirection: 'column', gap: '8px', maxHeight: '200px', overflowY: 'auto' }}>
            {sessions.length === 0 ? (
              <div style={{ fontSize: '0.75rem', color: '#666', padding: '10px', textAlign: 'center' }}>No saved workspaces.</div>
            ) : (
              sessions.map(s => (
                <div 
                  key={s._id} 
                  onClick={() => onLoadSession(s)}
                  style={{ 
                    padding: '10px', background: '#1F2937', borderRadius: '6px', fontSize: '0.8rem', cursor: 'pointer',
                    display: 'flex', justifyContent: 'space-between', alignItems: 'center'
                  }}
                  className="history-item-hover"
                >
                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                    <FaFolderOpen size={12} color="var(--pm-orange)" />
                    <span style={{ whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', maxWidth: '160px' }}>{s.name}</span>
                  </div>
                  <button onClick={(e) => deleteSession(s._id, e)} style={{ background: 'none', padding: 4, color: '#666' }}>
                    <FaTrashAlt size={10} />
                  </button>
                </div>
              ))
            )}
          </div>
        </div>

        <div className="form-group">
          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>
            <label className="form-label" style={{ marginBottom: 0, color: '#E5E7EB' }}><FaMagic style={{ marginRight: 6, color: '#A78BFA' }}/> AI Context Wrapper</label>
            <button onClick={applyPreset} title="Auto-fill" style={{ fontSize: '0.7rem', color: 'var(--accent)', background: 'rgba(255, 108, 55, 0.1)', padding: '4px 8px' }}>
              Auto-Fill
            </button>
          </div>
          
          <label style={{ display: 'flex', alignItems: 'center', gap: '10px', fontSize: '0.9rem', cursor: 'pointer', marginBottom: '16px', color: '#D1D5DB' }}>
            <input 
              type="checkbox" 
              checked={settings.useContext}
              onChange={(e) => setSettings({...settings, useContext: e.target.checked})}
              style={{ width: 'auto', accentColor: 'var(--accent)' }}
            />
            <span>Enable Prefix/Suffix</span>
          </label>

          {settings.useContext && (
            <div style={{ display: 'flex', flexDirection: 'column', gap: '16px', paddingLeft: '8px', borderLeft: '2px solid #374151' }}>
              <div>
                <span style={{ fontSize: '0.75rem', color: '#9CA3AF', marginBottom: '4px', display: 'block' }}>Header (Prefix)</span>
                <input 
                  type="text" 
                  value={settings.customPrefix}
                  onChange={(e) => setSettings({...settings, customPrefix: e.target.value})}
                  style={{ fontFamily: 'var(--font-mono)', fontSize: '0.8rem' }}
                />
              </div>
              <div>
                <span style={{ fontSize: '0.75rem', color: '#9CA3AF', marginBottom: '4px', display: 'block' }}>Footer (Suffix)</span>
                <input 
                  type="text" 
                  value={settings.customSuffix}
                  onChange={(e) => setSettings({...settings, customSuffix: e.target.value})}
                  style={{ fontFamily: 'var(--font-mono)', fontSize: '0.8rem' }}
                />
              </div>
            </div>
          )}
        </div>
      </div>

      <div style={{ padding: '20px', borderTop: '1px solid var(--sidebar-border)', background: '#0F1523', display: 'flex', flexDirection: 'column', gap: '10px' }}>
        <button className="btn-primary" onClick={handleSplitClick} style={{ width: '100%' }}>
          SPLIT CODE NOW
        </button>
        <button onClick={logout} style={{ background: 'none', color: '#666', fontSize: '0.75rem', justifyContent: 'center' }}>
          <FaSignOutAlt /> Sign Out
        </button>
      </div>

    </aside>
  );
};

export default Sidebar;
</file>

<file path="frontend/src/context/AuthContext.jsx">
import React, { createContext, useState, useEffect, useContext } from 'react';

const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
    const [user, setUser] = useState(null);
    const [token, setToken] = useState(localStorage.getItem('token'));
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        const storedUser = localStorage.getItem('user');
        const storedToken = localStorage.getItem('token');
        
        if (storedUser && storedToken) {
            setUser(JSON.parse(storedUser));
            setToken(storedToken);
        }
        setLoading(false); // Done checking localStorage
    }, []);

    const logout = () => {
        setToken(null);
        setUser(null);
        localStorage.removeItem('token');
        localStorage.removeItem('user');
    };

    return (
        <AuthContext.Provider value={{ user, setUser, token, setToken, logout, loading }}>
            {children}
        </AuthContext.Provider>
    );
};

export const useAuth = () => useContext(AuthContext);
</file>

<file path="frontend/src/main.jsx">
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.jsx'
import { AuthProvider } from './context/AuthContext'; // Add this import at top


createRoot(document.getElementById('root')).render(
  <StrictMode>
    <AuthProvider>
      <App />
    </AuthProvider>
  </StrictMode>,
)
</file>

<file path="frontend/src/pages/Login.jsx">
import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import API from '../utils/api';
import { useAuth } from '../context/AuthContext';

const Login = () => {
  const [formData, setFormData] = useState({ email: '', password: '' });
  const { setToken, setUser } = useAuth();
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      const { data } = await API.post('/auth/login', formData);
      setToken(data.token);
      setUser(data);
      localStorage.setItem('token', data.token);
      localStorage.setItem('user', JSON.stringify(data));
      navigate('/');
    } catch (err) {
      alert(err.response?.data?.message || "Login failed");
    }
  };

  return (
    <div style={{ display: 'flex', height: '100vh', alignItems: 'center', justifyContent: 'center', background: 'var(--main-bg)' }}>
      <div style={{ background: 'white', padding: '40px', borderRadius: 'var(--radius)', boxShadow: 'var(--shadow-md)', width: '100%', maxWidth: '400px' }}>
        <h2 style={{ marginBottom: '10px', color: 'var(--text-main)' }}>Sign In</h2>
        <p style={{ color: 'var(--text-muted)', marginBottom: '24px', fontSize: '0.9rem' }}>Access your saved code chunks.</p>
        
        <form onSubmit={handleSubmit}>
          <div className="form-group">
            <label className="form-label">Email Address</label>
            <input 
              type="email" 
              required 
              style={{ color: 'black', background: '#F4F5F8', border: '1px solid var(--border-color)' }}
              onChange={(e) => setFormData({...formData, email: e.target.value})}
            />
          </div>
          <div className="form-group">
            <label className="form-label">Password</label>
            <input 
              type="password" 
              required 
              style={{ color: 'black', background: '#F4F5F8', border: '1px solid var(--border-color)' }}
              onChange={(e) => setFormData({...formData, password: e.target.value})}
            />
          </div>
          <button type="submit" className="btn-primary" style={{ marginTop: '10px' }}>Sign In</button>
        </form>
        <p style={{ marginTop: '20px', textAlign: 'center', fontSize: '0.9rem' }}>
          New user? <Link to="/register" style={{ color: 'var(--pm-orange)', fontWeight: '600' }}>Create account</Link>
        </p>
      </div>
    </div>
  );
};

export default Login;
</file>

<file path="frontend/src/pages/Register.jsx">
import React, { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import API from '../utils/api';
import { useAuth } from '../context/AuthContext';

const Register = () => {
  const [formData, setFormData] = useState({ username: '', email: '', password: '' });
  const { setToken, setUser } = useAuth();
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      const { data } = await API.post('/auth/register', formData);
      setToken(data.token);
      setUser(data);
      localStorage.setItem('token', data.token);
      localStorage.setItem('user', JSON.stringify(data));
      navigate('/');
    } catch (err) {
      alert(err.response?.data?.message || "Registration failed");
    }
  };

  return (
    <div style={{ display: 'flex', height: '100vh', alignItems: 'center', justifyContent: 'center', background: 'var(--main-bg)' }}>
      <div style={{ background: 'white', padding: '40px', borderRadius: 'var(--radius)', boxShadow: 'var(--shadow-md)', width: '100%', maxWidth: '400px' }}>
        <h2 style={{ marginBottom: '10px', color: 'var(--text-main)' }}>Create Account</h2>
        <p style={{ color: 'var(--text-muted)', marginBottom: '24px', fontSize: '0.9rem' }}>Join Code Chunker Pro today.</p>
        
        <form onSubmit={handleSubmit}>
          <div className="form-group">
            <label className="form-label">Username</label>
            <input 
              type="text" 
              required 
              style={{ color: 'black', background: '#F4F5F8', border: '1px solid var(--border-color)' }}
              onChange={(e) => setFormData({...formData, username: e.target.value})}
            />
          </div>
          <div className="form-group">
            <label className="form-label">Email Address</label>
            <input 
              type="email" 
              required 
              style={{ color: 'black', background: '#F4F5F8', border: '1px solid var(--border-color)' }}
              onChange={(e) => setFormData({...formData, email: e.target.value})}
            />
          </div>
          <div className="form-group">
            <label className="form-label">Password</label>
            <input 
              type="password" 
              required 
              style={{ color: 'black', background: '#F4F5F8', border: '1px solid var(--border-color)' }}
              onChange={(e) => setFormData({...formData, password: e.target.value})}
            />
          </div>
          <button type="submit" className="btn-primary" style={{ marginTop: '10px' }}>Get Started</button>
        </form>
        <p style={{ marginTop: '20px', textAlign: 'center', fontSize: '0.9rem' }}>
          Already have an account? <Link to="/login" style={{ color: 'var(--pm-orange)', fontWeight: '600' }}>Sign In</Link>
        </p>
      </div>
    </div>
  );
};

export default Register;
</file>

<file path="frontend/src/utils/api.js">
import axios from 'axios';

const API = axios.create({
    baseURL: 'http://localhost:5000/api'
});

// Add token to every request automatically
API.interceptors.request.use((req) => {
    const token = localStorage.getItem('token');
    if (token) {
        req.headers.Authorization = `Bearer ${token}`;
    }
    return req;
});

export default API;
</file>

<file path="frontend/vite.config.js">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  // Use '/' locally, and '/code-chunker/' only when deploying to GitHub
  base: process.env.NODE_ENV === 'production' ? '/code-chunker/' : '/',
})
</file>

</files>
